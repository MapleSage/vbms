"use strict";(()=>{var e={};e.id=744,e.ids=[744],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3944:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>h,patchFetch:()=>m,requestAsyncStorage:()=>c,routeModule:()=>u,serverHooks:()=>d,staticGenerationAsyncStorage:()=>l});var o={};r.r(o),r.d(o,{POST:()=>p});var s=r(9303),a=r(8716),n=r(670),i=r(7070);async function p(e){try{let{messages:t}=await e.json();if(!t||!Array.isArray(t))return i.NextResponse.json({error:"Invalid messages format"},{status:400});let r=process.env.AZURE_AI_ENDPOINT,o=process.env.AZURE_AI_PROJECT_KEY,s=process.env.AZURE_AI_PROJECT_ID;if(!r||!o||!s)return console.error("Missing Azure AI configuration"),i.NextResponse.json({error:"Azure AI Service not configured"},{status:500});let a=await fetch(`${r}/chat/completions?api-version=2024-01-01-preview`,{method:"POST",headers:{"Content-Type":"application/json","api-key":o},body:JSON.stringify({messages:t.map(e=>({role:e.role,content:e.content})),max_tokens:2048,temperature:.7,top_p:1})});if(!a.ok){let e=await a.text();throw console.error("Azure API error:",e),Error(`Azure API error: ${a.status}`)}let n=await a.json(),p=n.choices?.[0]?.message?.content||"No response";return i.NextResponse.json({role:"assistant",content:p})}catch(e){return console.error("Chat error:",e),i.NextResponse.json({error:"Failed to process chat message"},{status:500})}}let u=new s.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/chat/route",pathname:"/api/chat",filename:"route",bundlePath:"app/api/chat/route"},resolvedPagePath:"/Volumes/Macintosh HD Ext/VBMS/vbms-app/app/api/chat/route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:c,staticGenerationAsyncStorage:l,serverHooks:d}=u,h="/api/chat/route";function m(){return(0,n.patchFetch)({serverHooks:d,staticGenerationAsyncStorage:l})}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[276,972],()=>r(3944));module.exports=o})();