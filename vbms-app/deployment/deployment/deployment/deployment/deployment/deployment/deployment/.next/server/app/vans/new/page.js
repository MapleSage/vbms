(()=>{var e={};e.id=944,e.ids=[944],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},2588:(e,r,a)=>{"use strict";a.r(r),a.d(r,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>d}),a(7910),a(7612),a(1506),a(5866);var t=a(3191),s=a(8716),n=a(7922),l=a.n(n),o=a(5231),i={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>o[e]);a.d(r,i);let d=["",{children:["vans",{children:["new",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,7910)),"/Volumes/Macintosh HD Ext/VBMS/vbms-app/app/vans/new/page.tsx"]}]},{}]},{loading:[()=>Promise.resolve().then(a.bind(a,7612)),"/Volumes/Macintosh HD Ext/VBMS/vbms-app/app/vans/loading.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,1506)),"/Volumes/Macintosh HD Ext/VBMS/vbms-app/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/Volumes/Macintosh HD Ext/VBMS/vbms-app/app/vans/new/page.tsx"],u="/vans/new/page",m={require:a,loadChunk:()=>Promise.resolve()},x=new t.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/vans/new/page",pathname:"/vans/new",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},6908:(e,r,a)=>{Promise.resolve().then(a.bind(a,4694))},2462:(e,r,a)=>{Promise.resolve().then(a.t.bind(a,2994,23)),Promise.resolve().then(a.t.bind(a,6114,23)),Promise.resolve().then(a.t.bind(a,9727,23)),Promise.resolve().then(a.t.bind(a,9671,23)),Promise.resolve().then(a.t.bind(a,1868,23)),Promise.resolve().then(a.t.bind(a,4759,23))},7802:()=>{},5303:()=>{},4694:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>g});var t=a(326),s=a(7577),n=a(434),l=a(5047),o=a(7888),i=a(6557);let d=(0,i.Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),c=(0,i.Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var u=a(6226);let m=(0,i.Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);function x({showBackButton:e=!1,backHref:r="/",currentPage:a}){return t.jsx("header",{className:"bg-white shadow-sm",children:t.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[e&&(0,t.jsxs)(n.default,{href:r,className:"text-gray-600 hover:text-gray-900 flex items-center gap-2",children:[t.jsx(m,{className:"w-5 h-5"}),t.jsx("span",{children:"Back"})]}),(0,t.jsxs)(n.default,{href:"/",className:"flex items-center gap-3",children:[t.jsx(u.default,{src:"/images/swire-sticky-logo-1.png",alt:"Swire",width:120,height:40,className:"h-10 w-auto"}),t.jsx("span",{className:"text-xl font-bold text-gray-900 border-l pl-3 border-gray-300",children:"VBMS"})]})]}),(0,t.jsxs)("nav",{className:"flex gap-4",children:[t.jsx(n.default,{href:"/",className:`${"home"===a?"text-blue-600 font-semibold":"text-gray-600 hover:text-gray-900"}`,children:"Home"}),t.jsx(n.default,{href:"/bookings",className:`${"bookings"===a?"text-blue-600 font-semibold":"text-gray-600 hover:text-gray-900"}`,children:"Bookings"}),t.jsx(n.default,{href:"/vans",className:`${"vans"===a?"text-blue-600 font-semibold":"text-gray-600 hover:text-gray-900"}`,children:"Vans"}),t.jsx(n.default,{href:"/calendar",className:`${"calendar"===a?"text-blue-600 font-semibold":"text-gray-600 hover:text-gray-900"}`,children:"Calendar"})]})]})})})}function g(){let e=(0,l.useRouter)(),r=(0,s.useRef)(null),[a,i]=(0,s.useState)(!1),[u,m]=(0,s.useState)(""),[g,p]=(0,s.useState)(!1),[h,b]=(0,s.useState)(null),[f,y]=(0,s.useState)(!1),[v,j]=(0,s.useState)({vanId:"",registration:"",make:"",model:"",year:new Date().getFullYear(),vin:"",tier:"STANDARD",type:"CARGO",dailyRate:"",mileageRate:"",status:"AVAILABLE",configuration:"",accessories:"",photoUrl:""}),N=async r=>{r.preventDefault(),i(!0),m("");try{let r=await fetch("/api/vans",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...v,year:parseInt(v.year.toString()),dailyRate:parseFloat(v.dailyRate),mileageRate:parseFloat(v.mileageRate),photoUrl:h?.url||null})}),a=await r.json();if(!r.ok)throw Error(a.error||"Failed to create van");p(!0),setTimeout(()=>{e.push("/vans")},2e3)}catch(e){m(e.message)}finally{i(!1)}},w=async e=>{if(!e.target.files||0===e.target.files.length)return;let r=e.target.files[0];if(!r.type.startsWith("image/")){m("Please upload an image file");return}if(r.size>5242880){m("Image must be less than 5MB");return}y(!0),m("");try{let e=await fetch(`/api/vans/upload?filename=${encodeURIComponent(r.name)}`,{method:"POST",body:r});if(!e.ok)throw Error("Failed to upload photo");let a=await e.json();b(a)}catch(e){m(e.message)}finally{y(!1)}},k=e=>{j({...v,[e.target.name]:e.target.value})};return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[t.jsx(x,{showBackButton:!0,backHref:"/vans",currentPage:"vans"}),(0,t.jsxs)("main",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,t.jsxs)("div",{className:"mb-8",children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Add New Van"}),t.jsx("p",{className:"text-gray-600 mt-1",children:"Add a new vehicle to your fleet"})]}),g&&t.jsx("div",{className:"mb-6 bg-green-50 border border-green-200 rounded-lg p-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-2 text-green-800",children:[t.jsx(o.Z,{className:"w-5 h-5"}),t.jsx("span",{className:"font-medium",children:"Van added successfully! Redirecting..."})]})}),u&&t.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-2 text-red-800",children:[t.jsx(o.Z,{className:"w-5 h-5"}),t.jsx("span",{className:"font-medium",children:u})]})}),(0,t.jsxs)("form",{onSubmit:N,className:"bg-white rounded-lg shadow-md p-6",children:[(0,t.jsxs)("div",{className:"mb-6 pb-6 border-b border-gray-200",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Van Photo"}),h?(0,t.jsxs)("div",{className:"relative inline-block",children:[t.jsx("img",{src:h.url,alt:"Van preview",className:"w-48 h-32 object-cover rounded-lg border-2 border-gray-200"}),t.jsx("button",{type:"button",onClick:()=>{b(null),r.current&&(r.current.value="")},className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 transition",children:t.jsx(c,{className:"w-4 h-4"})})]}):(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[t.jsx("input",{ref:r,type:"file",accept:"image/jpeg,image/png,image/webp",onChange:w,className:"hidden",id:"photo-upload"}),(0,t.jsxs)("label",{htmlFor:"photo-upload",className:"flex items-center gap-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg cursor-pointer transition",children:[t.jsx(d,{className:"w-5 h-5"}),t.jsx("span",{children:f?"Uploading...":"Upload Photo"})]}),t.jsx("span",{className:"text-sm text-gray-500",children:"JPG, PNG or WebP (max 5MB)"})]})]}),(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Van ID *"}),t.jsx("input",{type:"text",name:"vanId",value:v.vanId,onChange:k,required:!0,placeholder:"VAN001",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Registration *"}),t.jsx("input",{type:"text",name:"registration",value:v.registration,onChange:k,required:!0,placeholder:"ABC123",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Make *"}),t.jsx("input",{type:"text",name:"make",value:v.make,onChange:k,required:!0,placeholder:"Ford",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Model *"}),t.jsx("input",{type:"text",name:"model",value:v.model,onChange:k,required:!0,placeholder:"Transit",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Year *"}),t.jsx("input",{type:"number",name:"year",value:v.year,onChange:k,required:!0,min:"1990",max:"2030",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"VIN"}),t.jsx("input",{type:"text",name:"vin",value:v.vin,onChange:k,placeholder:"1FTFW1ET5DFC10312",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tier *"}),(0,t.jsxs)("select",{name:"tier",value:v.tier,onChange:k,required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[t.jsx("option",{value:"STANDARD",children:"Standard"}),t.jsx("option",{value:"PREMIUM",children:"Premium"}),t.jsx("option",{value:"SPECIALIZED",children:"Specialized"})]})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type *"}),(0,t.jsxs)("select",{name:"type",value:v.type,onChange:k,required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[t.jsx("option",{value:"CARGO",children:"Cargo"}),t.jsx("option",{value:"PASSENGER",children:"Passenger"}),t.jsx("option",{value:"REFRIGERATED",children:"Refrigerated"}),t.jsx("option",{value:"BOX_TRUCK",children:"Box Truck"})]})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Daily Rate ($) *"}),t.jsx("input",{type:"number",name:"dailyRate",value:v.dailyRate,onChange:k,required:!0,min:"0",step:"0.01",placeholder:"100.00",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mileage Rate ($/mi) *"}),t.jsx("input",{type:"number",name:"mileageRate",value:v.mileageRate,onChange:k,required:!0,min:"0",step:"0.01",placeholder:"0.50",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status *"}),(0,t.jsxs)("select",{name:"status",value:v.status,onChange:k,required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[t.jsx("option",{value:"AVAILABLE",children:"Available"}),t.jsx("option",{value:"BOOKED",children:"Booked"}),t.jsx("option",{value:"ACTIVE",children:"Active"}),t.jsx("option",{value:"MAINTENANCE",children:"Maintenance"}),t.jsx("option",{value:"UNAVAILABLE",children:"Unavailable"}),t.jsx("option",{value:"INACTIVE",children:"Inactive"})]})]})]}),(0,t.jsxs)("div",{className:"mt-6",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Configuration"}),t.jsx("textarea",{name:"configuration",value:v.configuration,onChange:k,rows:3,placeholder:"Standard cargo configuration with shelving",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,t.jsxs)("div",{className:"mt-6",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Accessories"}),t.jsx("textarea",{name:"accessories",value:v.accessories,onChange:k,rows:2,placeholder:"GPS, Bluetooth, Backup camera",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,t.jsxs)("div",{className:"flex gap-4 mt-8",children:[t.jsx("button",{type:"submit",disabled:a||g,className:"flex-1 bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-700 transition disabled:bg-gray-400 disabled:cursor-not-allowed",children:a?"Adding...":"Add Van"}),t.jsx(n.default,{href:"/vans",className:"px-6 py-3 border-2 border-gray-300 rounded-lg font-semibold text-gray-700 hover:bg-gray-50 transition text-center",children:"Cancel"})]})]})]})]})}},6557:(e,r,a)=>{"use strict";a.d(r,{Z:()=>l});var t=a(7577),s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),l=(e,r)=>{let a=(0,t.forwardRef)(({color:a="currentColor",size:l=24,strokeWidth:o=2,absoluteStrokeWidth:i,className:d="",children:c,...u},m)=>(0,t.createElement)("svg",{ref:m,...s,width:l,height:l,stroke:a,strokeWidth:i?24*Number(o)/Number(l):o,className:["lucide",`lucide-${n(e)}`,d].join(" "),...u},[...r.map(([e,r])=>(0,t.createElement)(e,r)),...Array.isArray(c)?c:[c]]));return a.displayName=`${e}`,a}},7888:(e,r,a)=>{"use strict";a.d(r,{Z:()=>t});let t=(0,a(6557).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},6226:(e,r,a)=>{"use strict";a.d(r,{default:()=>s.a});var t=a(9029),s=a.n(t)},434:(e,r,a)=>{"use strict";a.d(r,{default:()=>s.a});var t=a(9404),s=a.n(t)},5047:(e,r,a)=>{"use strict";var t=a(7389);a.o(t,"useRouter")&&a.d(r,{useRouter:function(){return t.useRouter}})},9029:(e,r,a)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,r){for(var a in r)Object.defineProperty(e,a,{enumerable:!0,get:r[a]})}(r,{default:function(){return i},getImageProps:function(){return o}});let t=a(1174),s=a(3078),n=a(2481),l=t._(a(6820));function o(e){let{props:r}=(0,s.getImgProps)(e,{defaultLoader:l.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,a]of Object.entries(r))void 0===a&&delete r[e];return{props:r}}let i=n.Image},1506:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>o,metadata:()=>l});var t=a(9510),s=a(5384),n=a.n(s);a(7272);let l={title:"VBMS - Van Booking & Fleet Management",description:"Modern fleet management system"};function o({children:e}){return t.jsx("html",{lang:"en",children:t.jsx("body",{className:n().className,children:e})})}},7612:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>s});var t=a(9510);function s(){return t.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600",children:"Loading vans..."})]})})}},7910:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>t});let t=(0,a(8570).createProxy)(String.raw`/Volumes/Macintosh HD Ext/VBMS/vbms-app/app/vans/new/page.tsx#default`)},7272:()=>{}};var r=require("../../../webpack-runtime.js");r.C(e);var a=e=>r(r.s=e),t=r.X(0,[276,892,404,481],()=>a(2588));module.exports=t})();