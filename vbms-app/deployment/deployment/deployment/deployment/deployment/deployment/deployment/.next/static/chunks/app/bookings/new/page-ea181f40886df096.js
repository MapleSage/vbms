(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[559],{9453:function(e,r,t){Promise.resolve().then(t.bind(t,9030))},9030:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return x}});var a=t(7437),s=t(2265),n=t(7648),l=t(3145),i=t(9376),o=t(2252),c=t(9763);let d=(0,c.Z)("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]),u=(0,c.Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);var m=t(1047);function x(){let e=(0,i.useRouter)(),[r,t]=(0,s.useState)([]),[c,x]=(0,s.useState)(!1),[h,g]=(0,s.useState)(""),[f,b]=(0,s.useState)(!1),[p,y]=(0,s.useState)({projectId:"",vanId:"",driverName:"",driverContact:"",startDateTime:"",endDateTime:"",bookingPoc:""});(0,s.useEffect)(()=>{fetch("/api/vans").then(e=>e.json()).then(e=>t(e)).catch(e=>console.error("Failed to load vans:",e))},[]);let j=async r=>{r.preventDefault(),x(!0),g("");try{let r=await fetch("/api/bookings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)}),t=await r.json();if(!r.ok)throw Error(t.error||"Failed to create booking");b(!0),setTimeout(()=>{e.push("/bookings")},2e3)}catch(e){g(e.message)}finally{x(!1)}},v=e=>{y({...p,[e.target.name]:e.target.value})};return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("header",{className:"bg-white shadow-sm",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)(n.default,{href:"/",className:"flex items-center gap-3",children:[(0,a.jsx)(l.default,{src:"/images/swire-sticky-logo-1.png",alt:"Swire",width:120,height:40,className:"h-10 w-auto"}),(0,a.jsx)("span",{className:"text-xl font-bold text-gray-900 border-l pl-3 border-gray-300",children:"VBMS"})]}),(0,a.jsxs)("nav",{className:"flex gap-4",children:[(0,a.jsx)(n.default,{href:"/",className:"text-gray-600 hover:text-gray-900",children:"Home"}),(0,a.jsx)(n.default,{href:"/bookings",className:"text-blue-600 font-semibold",children:"Bookings"}),(0,a.jsx)(n.default,{href:"/vans",className:"text-gray-600 hover:text-gray-900",children:"Vans"}),(0,a.jsx)(n.default,{href:"/calendar",className:"text-gray-600 hover:text-gray-900",children:"Calendar"})]})]})})}),(0,a.jsxs)("main",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)(n.default,{href:"/bookings",className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"â† Back to Bookings"}),(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mt-4",children:"Create New Booking"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Fill in the details to create a new van booking"})]}),f&&(0,a.jsx)("div",{className:"mb-6 bg-green-50 border border-green-200 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-2 text-green-800",children:[(0,a.jsx)(o.Z,{className:"w-5 h-5"}),(0,a.jsx)("span",{className:"font-medium",children:"Booking created successfully! Redirecting..."})]})}),h&&(0,a.jsx)("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-2 text-red-800",children:[(0,a.jsx)(o.Z,{className:"w-5 h-5"}),(0,a.jsx)("span",{className:"font-medium",children:h})]})}),(0,a.jsxs)("form",{onSubmit:j,className:"bg-white rounded-lg shadow-md p-6",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(d,{className:"w-4 h-4"}),"Select Van"]})}),(0,a.jsxs)("select",{name:"vanId",value:p.vanId,onChange:v,required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,a.jsx)("option",{value:"",children:"Choose a van..."}),r.map(e=>(0,a.jsxs)("option",{value:e.vanId,children:[e.registration," - ",e.make," ",e.model," (",e.status,")"]},e.id))]})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Project ID"}),(0,a.jsx)("input",{type:"text",name:"projectId",value:p.projectId,onChange:v,required:!0,placeholder:"e.g., 12345",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(u,{className:"w-4 h-4"}),"Driver Name"]})}),(0,a.jsx)("input",{type:"text",name:"driverName",value:p.driverName,onChange:v,required:!0,placeholder:"John Smith",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Driver Contact"}),(0,a.jsx)("input",{type:"text",name:"driverContact",value:p.driverContact,onChange:v,required:!0,placeholder:"john@example.com or +1234567890",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-6 mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(m.Z,{className:"w-4 h-4"}),"Start Date & Time"]})}),(0,a.jsx)("input",{type:"datetime-local",name:"startDateTime",value:p.startDateTime,onChange:v,required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(m.Z,{className:"w-4 h-4"}),"End Date & Time"]})}),(0,a.jsx)("input",{type:"datetime-local",name:"endDateTime",value:p.endDateTime,onChange:v,required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(u,{className:"w-4 h-4"}),"Project Leader / Booking POC (Optional)"]})}),(0,a.jsx)("input",{type:"text",name:"bookingPoc",value:p.bookingPoc,onChange:v,placeholder:"Name of project leader who initiated booking",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsx)("button",{type:"submit",disabled:c||f,className:"flex-1 bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-700 transition disabled:bg-gray-400 disabled:cursor-not-allowed",children:c?"Creating...":"Create Booking"}),(0,a.jsx)(n.default,{href:"/bookings",className:"px-6 py-3 border-2 border-gray-300 rounded-lg font-semibold text-gray-700 hover:bg-gray-50 transition",children:"Cancel"})]})]}),(0,a.jsxs)("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,a.jsx)("h3",{className:"font-semibold text-blue-900 mb-2",children:"Automatic Conflict Detection"}),(0,a.jsx)("p",{className:"text-sm text-blue-800",children:"The system will automatically check for booking conflicts and prevent double-booking of vans during the same time period."})]})]})]})}},9763:function(e,r,t){"use strict";t.d(r,{Z:function(){return l}});var a=t(2265),s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),l=(e,r)=>{let t=(0,a.forwardRef)((t,l)=>{let{color:i="currentColor",size:o=24,strokeWidth:c=2,absoluteStrokeWidth:d,className:u="",children:m,...x}=t;return(0,a.createElement)("svg",{ref:l,...s,width:o,height:o,stroke:i,strokeWidth:d?24*Number(c)/Number(o):c,className:["lucide","lucide-".concat(n(e)),u].join(" "),...x},[...r.map(e=>{let[r,t]=e;return(0,a.createElement)(r,t)}),...Array.isArray(m)?m:[m]])});return t.displayName="".concat(e),t}},2252:function(e,r,t){"use strict";t.d(r,{Z:function(){return a}});let a=(0,t(9763).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},1047:function(e,r,t){"use strict";t.d(r,{Z:function(){return a}});let a=(0,t(9763).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},3145:function(e,r,t){"use strict";t.d(r,{default:function(){return s.a}});var a=t(8461),s=t.n(a)},7648:function(e,r,t){"use strict";t.d(r,{default:function(){return s.a}});var a=t(2972),s=t.n(a)},9376:function(e,r,t){"use strict";var a=t(5475);t.o(a,"useRouter")&&t.d(r,{useRouter:function(){return a.useRouter}})},8461:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,r){for(var t in r)Object.defineProperty(e,t,{enumerable:!0,get:r[t]})}(r,{default:function(){return o},getImageProps:function(){return i}});let a=t(7043),s=t(5346),n=t(5878),l=a._(t(5084));function i(e){let{props:r}=(0,s.getImgProps)(e,{defaultLoader:l.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,t]of Object.entries(r))void 0===t&&delete r[e];return{props:r}}let o=n.Image}},function(e){e.O(0,[972,878,971,117,744],function(){return e(e.s=9453)}),_N_E=e.O()}]);