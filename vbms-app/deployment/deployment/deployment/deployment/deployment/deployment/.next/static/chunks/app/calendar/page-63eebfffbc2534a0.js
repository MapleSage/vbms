(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[329],{4923:function(e,t,s){Promise.resolve().then(s.bind(s,8676))},8676:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return h}});var a=s(7437),n=s(2265),l=s(7648),r=s(1047),i=s(9763);let d=(0,i.Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),c=(0,i.Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),o=(0,i.Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);function h(){let[e,t]=(0,n.useState)([]),[s,i]=(0,n.useState)(new Date),[h,m]=(0,n.useState)(!0),[x,g]=(0,n.useState)(null);(0,n.useEffect)(()=>{fetch("/api/bookings").then(e=>{if(!e.ok)throw Error("Failed to fetch bookings");return e.json()}).then(e=>{t(e),m(!1)}).catch(e=>{console.error("Failed to load bookings:",e),g(e.message),m(!1)})},[]);let u=t=>e.filter(e=>{let a=new Date(e.startDateTime),n=new Date(e.endDateTime),l=new Date(s.getFullYear(),s.getMonth(),t);return a<=l&&l<=n}),b=new Date(s.getFullYear(),s.getMonth()+1,0).getDate();new Date(s.getFullYear(),s.getMonth(),1).getDay();let f=s.toLocaleString("default",{month:"long",year:"numeric"}),j=new Date;j.getDate()===new Date().getDate()&&j.getMonth()===s.getMonth()&&(j.getFullYear(),s.getFullYear());let p={REQUESTED:"bg-yellow-100 text-yellow-800",CONFIRMED:"bg-blue-100 text-blue-800",ACTIVE:"bg-green-100 text-green-800",COMPLETED:"bg-gray-100 text-gray-800"};return h?(0,a.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,a.jsx)("div",{className:"animate-spin",children:(0,a.jsx)(r.Z,{className:"w-8 h-8"})})}):(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,a.jsxs)("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[(0,a.jsx)(r.Z,{className:"w-8 h-8"})," Fleet Bookings Calendar"]})}),(0,a.jsxs)("div",{className:"flex items-center justify-between bg-white border rounded-lg p-4 mb-6",children:[(0,a.jsx)("button",{onClick:()=>i(new Date(s.getFullYear(),s.getMonth()-1)),className:"p-2 hover:bg-gray-100 rounded",children:(0,a.jsx)(d,{className:"w-5 h-5"})}),(0,a.jsx)("h2",{className:"text-xl font-semibold",children:f}),(0,a.jsx)("button",{onClick:()=>i(new Date(s.getFullYear(),s.getMonth()+1)),className:"p-2 hover:bg-gray-100 rounded",children:(0,a.jsx)(c,{className:"w-5 h-5"})})]})]}),x&&(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:(0,a.jsx)("p",{className:"text-red-700",children:x})}),(0,a.jsx)("div",{className:"space-y-3",children:Array.from({length:b}).map((e,t)=>{let n=t+1,r=new Date(s.getFullYear(),s.getMonth(),n).toLocaleString("default",{weekday:"long"}),i=u(n),d=j.getDate()===n&&j.getMonth()===s.getMonth()&&j.getFullYear()===s.getFullYear();return(0,a.jsxs)("div",{className:"rounded-lg overflow-hidden border-2 ".concat(d?"border-blue-400 bg-blue-50":"border-gray-200"),children:[(0,a.jsxs)("div",{className:"px-4 py-3 font-semibold flex items-center justify-between ".concat(d?"bg-blue-400 text-white":"bg-gray-100"),children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-lg",children:n}),(0,a.jsx)("span",{className:"ml-2 text-sm opacity-75",children:r})]}),(0,a.jsxs)("span",{className:"text-sm bg-gray-300 bg-opacity-50 px-2 py-1 rounded",children:[i.length," booking",1!==i.length?"s":""]})]}),i.length>0?(0,a.jsx)("div",{className:"divide-y max-h-96 overflow-y-auto",children:i.map(e=>{var t;return(0,a.jsx)(l.default,{href:"/bookings/".concat(e.id),className:"block px-4 py-3 hover:bg-gray-50 transition",children:(0,a.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"font-semibold text-blue-600 mb-1",children:(null===(t=e.van)||void 0===t?void 0:t.registration)||"Unknown Van"}),(0,a.jsxs)("div",{className:"text-sm text-gray-700 space-y-1",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Project:"})," ",e.projectId]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Driver:"})," ",e.driverName]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Time:"})," ",new Date(e.startDateTime).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})," ","-"," ",new Date(e.endDateTime).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),e.bookingPoc&&(0,a.jsxs)("p",{className:"flex items-center gap-1",children:[(0,a.jsx)(o,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"font-medium",children:"POC:"})," ",e.bookingPoc]})]})]}),(0,a.jsx)("span",{className:"px-2 py-1 rounded text-xs font-semibold whitespace-nowrap ".concat(p[e.status]||"bg-gray-100 text-gray-800"),children:e.status})]})},e.id)})}):(0,a.jsx)("div",{className:"px-4 py-6 text-center text-gray-400 text-sm",children:"No bookings scheduled"})]},n)})}),(0,a.jsxs)("div",{className:"mt-8 bg-gray-50 rounded-lg p-4 border",children:[(0,a.jsx)("h3",{className:"font-semibold mb-3",children:"Monthly Stats"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:e.length}),(0,a.jsx)("div",{className:"text-gray-600",children:"Total Bookings"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600",children:e.filter(e=>"CONFIRMED"===e.status).length}),(0,a.jsx)("div",{className:"text-gray-600",children:"Confirmed"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:e.filter(e=>"REQUESTED"===e.status).length}),(0,a.jsx)("div",{className:"text-gray-600",children:"Requested"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:e.filter(e=>e.bookingPoc).length}),(0,a.jsx)("div",{className:"text-gray-600",children:"With POC"})]})]})]})]})}},9763:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var a=s(2265),n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),r=(e,t)=>{let s=(0,a.forwardRef)((s,r)=>{let{color:i="currentColor",size:d=24,strokeWidth:c=2,absoluteStrokeWidth:o,className:h="",children:m,...x}=s;return(0,a.createElement)("svg",{ref:r,...n,width:d,height:d,stroke:i,strokeWidth:o?24*Number(c)/Number(d):c,className:["lucide","lucide-".concat(l(e)),h].join(" "),...x},[...t.map(e=>{let[t,s]=e;return(0,a.createElement)(t,s)}),...Array.isArray(m)?m:[m]])});return s.displayName="".concat(e),s}},1047:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},7648:function(e,t,s){"use strict";s.d(t,{default:function(){return n.a}});var a=s(2972),n=s.n(a)}},function(e){e.O(0,[972,971,117,744],function(){return e(e.s=4923)}),_N_E=e.O()}]);